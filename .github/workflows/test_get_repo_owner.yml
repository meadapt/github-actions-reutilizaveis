# This uses a reusable workflow
name: Test

on: push

jobs:
  do-it:
    runs-on: ubuntu-latest
    steps:
      - name: See repo name
        env:
          NAME: ${{ github.event.repository.name }}
        run: echo $NAME
      - name: See repo owner/name
        id: split
        env:
          OWNER_NAME: ${{ github.repository }}
        run: echo "::set-output name=owner::${OWNER_NAME%/*}"
      - name: Test variable owner
        run: |
          echo ${{ steps.split.outputs.owner }}
      - uses: octokit/request-action@v2.x
        id: get_account_info
        with:
          route: GET /users/{owner}
          owner: ${{ steps.split.outputs.owner }}
        env:
          GITHUB_TOKEN: ${{ secrets.GH_TOKEN }}
      - id: get_repo_type
        run: |
          if [ ${{ fromJson(steps.get_account_info.outputs.data).type }} == 'Organization' ]
          then
            echo "::set-output name=type::'orgs'"
          else
            echo "::set-output name=type::'users'"
          fi
      - run: echo ${{ steps.get_repo_type.outputs.type }}
